<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Tutorfair - analysing and visualising internal company data">
    <meta name="author" content="Chris J. Davie">
    
    <title>Pipeline prototype.</title>

    <!-- Bootstrap Core CSS -->
    <link href="../css/bootstrap.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="../css/3-col-portfolio.css" rel="stylesheet">
    
    <link href="../css/style_not_gh_pages.css" rel="stylesheet">



<!--    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">-->
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>

    <!-- Navigation -->
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="../index.html">Home</a>
                <a class="navbar-brand" href="../portfolio.html">Portfolio</a>
                <a class="navbar-brand" href="../testimonials.html">Testimonials</a>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                    <li>
                        <a href="../about.html">About</a>
                    </li>
                    <!--<li>-->
                    <!--    <a href="#">Services</a>-->
                    <!--</li>-->
                    <!--<li>-->
                    <!--    <a href="#">Contact</a>-->
                    <!--</li>-->
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <!-- Page Content -->
    <div class="container">

        <!-- Page Header -->
        <div class="row">
            <div class="col-lg-7">
                <h1 class="page-header">Pipeline prototype
                    <small>Proof of concept for model building</small>
                </h1>
            </div>
        </div>
        <!-- /.row -->

        <!-- Projects Row -->
        <div class="row">
            <div class="col-lg-7">  
                <p>The first iteration of the <i>Speechmatics</i> automated model building pipeline, building automatic speech recognition (ASR) models for multiple languages.</p>
                <p>I designed and implemented this, concretely proving the pipeline concept would work, and it produced the first 7 language models.</p>
                <h1>Pipeline prototype</h1>
                <p><i>Speechmatics</i> had a largely manual process for building ASR models for new languages, taking up to 3 months from start to finish. Having completed this process for both English and German, they sought to build a automated pipeline from start to finish.</p>
                <h2>Problem</h2>
                <p>The previous models were built manually with different procedures. Each stage had its own interface, with no well defined inputs or outputs.</p>
                <p>The underlying Machine Learning tools were two (mainly) bash pipelines developed over the previous decade, hand-configured and run multiple times as part of the model building process. The intermediate stages were many inter-connected layers of scripts.</p>
                <p>The data files required to build the model were stored in an ad-hoc fashion throughout the file system, in undocumented locations. The data selection to build the model was entirely manual.</p>
                <p>Finally, the source code to run the pipeline was acquired by cloning branches of various repositories, making it challenging to reproduce the models.</p>
                <h2>Solution</h2>
                <p>The specification gathering and design was crucial, as the automation of such a hand-run process required solid understanding of the steps. After much consultation with the speech engineers my initial design was agreed on, with one speech engineer as the primary point of contact.</p>
                <p>The design itself was straight forwards; for each stage there was a Python interface setting up and calling the required bash code, providing the inputs and output. These wrappers were called linearly, with the outputs checked. The models, code version and configuration files were saved as the output of the system, allowing some reproducibility for the models.</p>
                <p>I reduced the amount of cloning from different branches, storing a single, stable version of each of the repositories when it straightforwards to do so.</p>
                <p>The data itself needed to be stored in a consistent manner. A simple system reflective of the data requirements, storing the data in nested folders, was extended from a previous system. A thin interface for the filesystem was introduced, to allow the required data to be easily referenced.</p>
                <p>The correct data was required for all the stages of model building. The requirements naturally lent themselves to a tree-and-branch algorithm, with the data files represented as the leaf nodes.</p>
                <p>The final aspect of the solution was caching - for each model, the features of the audio needed to be recomputed for many thousands of files. In lieu of a database, a flat file caching the results with a key-value pair was introduced, allowing rapid querying of the data.</p>

                <h2>Results</h2>
                <p>The prototype was successful, and was used to build the first seven languages in parallel, all of which were used as the final models in <i>Speechmaticsâ€™</i> production ASR system. What had previously been a 3 month process took 2 weeks, and only required a few days of developer time to make work.</p>
                <p>It was this prototype that allowed us to build the first 7 language models, and was the basis of the current production system.</p>

                <h2>Limitations</h2>
                <p>Although the prototype was very successful, it was far from a fully automated pipeline, and when it was running with multiple languages in parallel required more than one person managing it full time. For a tech team of 10 people, this cost up 20% of the man hours. This was primarily due to the instability of the underlying bash code - it would fail regularly, due to bugs and unreliable hardware. The software would not crash, but continue running and crash elsewhere. Finding the bugs was challenging, typically taking several hours to find the cause of the crash.</p>
                <p>A second limitation was the ongoing development of these underlying libraries. Another project has successfully decreased the compute time by a factor of 8, a huge saving for <i>Speechmatics</i>, but these changes did not respect the interfaces in the pipeline. Each time these changes were made, it required several weeks to update the interfaces of the prototype.</p>
                <p>This led to the next stages of work, focusing on stability and maintainability.</p>
            </div>
            <div class="col-xs-3 portfolio-item">
                <img class="style-svg" src="../images/dependencies.svg" alt="Dependency graph for the prototype pipeline">
                <small>Dependency graph for the prototype pipeline, unlabelled.</small>
            </div>
        </div>

        <!-- Footer -->
        <footer>
            <div class="row">
                <div class="col-lg-12">
                    <p>Copyright &copy; Chris J Davie, 2017</p>
                </div>
            </div>
            <!-- /.row -->
        </footer>

    </div>
    <!-- /.container -->

    <!-- jQuery -->
    <script src="../js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="../js/bootstrap.min.js"></script>

</body>

</html>

